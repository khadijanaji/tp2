<html>

<head>
	<title></title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

	<style type="text/css" media="screen">
		.card {
			margin: 10px;
		}

		body {
			background-color: rgb(218, 218, 218);
		}
	</style>
</head>

<body>
	<div class="container">
		<center>
			<h1>Listes des Utilisateurs</h1>
		</center>

		<hr>
		<div class="users">
			<center>
				<div style="">
					<button class="btn btn-secondary" type="button" onclick="change()">Changer l'affichage</button>
				</div>
			</center>

			<div class="row" id="out">

			</div>
		</div>
		<div id="gabari" style="display: none;margin-top: 40px;">
			<div class="col-md-4 grid">
				<div class="card" style="width: 18rem;">
					<img class="card-img-top" src="" alt="Card image cap">
					<div class="card-body">
						<h5 class="card-title name">Card title</h5>

						<p class="card-text email">Some quick example text to build on the card title and make up the bulk of the
							card's content.</p>
						<button id="about" class="btn btn-success btn-block" data-toggle="modal" data-target="#modal">Edit</button>
					</div>
				</div>
			</div>

			<div class="row table">
				<div class="col-sm" style="">
					<img src="https://lorempixel.com/300/300/people?43" alt="" width="90px;" height="90px;">
				</div>
				<div class="col-sm" style="padding: 15px;">
					<h5 class="card-title name">Card title</h5>
				</div>
				<div class="col-sm" style="padding: 15px;">
					<p class="card-text email">Some quick example</p>
				</div>
				<div class="col-sm" style="padding: 15px;">
					<button id="about" class="btn btn-success btn-block" data-toggle="modal" data-target="#modal">Edit</button>
				</div>

			</div>
		</div>

		<!-- Modal -->
		<div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
			aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body xd">
						<center>
							<img src="" alt="" width="120px" height="120px;">
						</center>
						<br>
						<form>
							<div class="form-group">
								<label for="exampleInputEmail1">NAME :</label>
								<input type="text" value="" class="form-control" id="name" aria-describedby="emailHelp">
							</div>
							<div class="form-group">
								<label for="exampleInputPassword1">Description :</label>
								<input type="text" value="" class="form-control" id="desc">
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
						<button id="idvalue" type="button" class="btn btn-primary">Save changes</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>


<script type="text/javascript" charset="utf-8">
	var isit = true;
	var users = [{
			picture: 'https://lorempixel.com/300/300/people?103',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?123',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?153',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?133',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?198',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?113',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?43',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?133',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?198',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?113',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?43',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?133',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?198',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?113',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		},
		{
			picture: 'https://lorempixel.com/300/300/people?43',
			name: 'test',
			bio: 'la vie est belle à l\'ENSET'
		}
	]

	function showUsers(users, id) {
		document.querySelector('#out').innerHTML = '';
		if (isit == true) {
			var card = document.querySelector('#gabari .table');
		} else var card = document.querySelector('#gabari .grid');

		var out = document.querySelector(id);
		users.forEach(function (user, index) {
			var clone = card.cloneNode(true);
			clone.querySelector('img').setAttribute('src', user.picture);
			clone.querySelector('p').innerHTML = user.bio;
			clone.querySelector('#about').setAttribute('onclick', 'show(' + index + ')');
			clone.querySelector('h5').innerHTML = user.name;
			out.appendChild(clone);
		});
	}

	function change() {
		if (isit == true) {
			isit = false;
		} else isit = true;

		showUsers(users, '#out');
	}

	function show(index) {
		console.log(users[index].picture)
		var card = document.querySelector('#modal .xd');
		card.querySelector('#name').value = users[index].name
		card.querySelector('#desc').value = users[index].bio
		card.querySelector('img').setAttribute('src', users[index].picture);
		document.querySelector('#idvalue').setAttribute('onclick', 'update(' + index + ')');
	}

	function update(index) {
		console.log(index)
		var card = document.querySelector('#modal .xd');
		users[index].name = card.querySelector('#name').value
		users[index].bio = card.querySelector('#desc').value
		showUsers(users, '#out');
	}
	showUsers(users, '#out');
</script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
	integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
	integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
	integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</html>